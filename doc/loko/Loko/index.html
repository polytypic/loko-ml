<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Loko (loko.Loko)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../';
let search_urls = ['../db.js','../../sherlodoc.js'];
</script><script src="../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">loko</a> &#x00BB; Loko</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Loko</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#loko-â€”-lower-kinded-optics">Loko â€” Lower-Kinded Optics</a><ul><li><a href="#auxiliary-abstractions">Auxiliary abstractions</a></li><li><a href="#optic-types">Optic types</a></li><li><a href="#optic-constructors">Optic constructors</a></li><li><a href="#viewing-a-focus">Viewing a focus</a></li><li><a href="#reviewing-through-invertible-optics">Reviewing through invertible optics</a></li><li><a href="#mapping-over-focuses">Mapping over focuses</a></li><li><a href="#setting-focuses">Setting focuses</a></li><li><a href="#removing-focuses">Removing focuses</a></li><li><a href="#dispersing-focuses">Dispersing focuses</a></li><li><a href="#transforms">Transforms</a><ul><li><a href="#transform-ops">Transform ops</a></li></ul></li><li><a href="#combinators">Combinators</a></li><li><a href="#conditionals">Conditionals</a></li><li><a href="#primitives">Primitives</a></li><li><a href="#removal">Removal</a></li><li><a href="#prisms">Prisms</a></li><li><a href="#isomorphisms">Isomorphisms</a></li><li><a href="#side-effects">Side-effects</a></li><li><a href="#folds">Folds</a></li><li><a href="#pairs">Pairs</a></li><li><a href="#tuples">Tuples</a></li><li><a href="#numerics">Numerics</a></li><li><a href="#stdlib-data-types">Stdlib data types</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="loko-â€”-lower-kinded-optics"><a href="#loko-â€”-lower-kinded-optics" class="anchor"></a>Loko â€” Lower-Kinded Optics</h2><p>Typically one either refers to the library primitives through the <code>Loko</code> module name or, as done in this documentation, uses an abbreviation such as</p><pre class="language-ocaml"><code>module L = Loko</code></pre><p>to keep code more succinct.</p><p>To compose optics we also define an ordinary function composition operator</p><pre class="language-ocaml"><code>let ( ^&lt;&lt; ) f g x = f (g x)</code></pre><p>as one is not exposed by <code>Loko</code>.</p><h3 id="auxiliary-abstractions"><a href="#auxiliary-abstractions" class="anchor"></a>Auxiliary abstractions</h3><p><b>NOTE:</b> The abstractions in this section serve auxiliary roles for the definition of optics.</p><div class="odoc-spec"><div class="spec type anchored" id="type-iterator"><a href="#type-iterator" class="anchor"></a><code><span><span class="keyword">type</span> <span>('xs, 'x) iterator</span></span><span> = </span></code><ol><li id="type-iterator.Iterator" class="def variant constructor anchored"><a href="#type-iterator.Iterator" class="anchor"></a><code><span>| </span><span><span class="constructor">Iterator</span> : </span><span>{</span></code><ol><li id="type-iterator.start" class="def record field anchored"><a href="#type-iterator.start" class="anchor"></a><code><span>start : <span><span class="type-var">'xs</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'iterator</span>;</span></code></li><li id="type-iterator.next" class="def record field anchored"><a href="#type-iterator.next" class="anchor"></a><code><span>next : <span><span class="type-var">'iterator</span> <span class="arrow">&#45;&gt;</span></span> <span>[ `Done <span><span>| `Next</span> of <span class="type-var">'x</span> * <span class="type-var">'iterator</span></span> ]</span>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><span>(<span class="type-var">'xs</span>, <span class="type-var">'x</span>)</span> <a href="#type-iterator">iterator</a></span></span></code></li></ol></div><div class="spec-doc"><p>An iterator extracts elements of type <code>'x</code> one-by-one from a collection of type <code>'xs</code>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Iterator"><a href="#module-Iterator" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Iterator/index.html">Iterator</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-builder"><a href="#type-builder" class="anchor"></a><code><span><span class="keyword">type</span> <span>('y, 'ys) builder</span></span><span> = </span></code><ol><li id="type-builder.Builder" class="def variant constructor anchored"><a href="#type-builder.Builder" class="anchor"></a><code><span>| </span><span><span class="constructor">Builder</span> : </span><span>{</span></code><ol><li id="type-builder.empty" class="def record field anchored"><a href="#type-builder.empty" class="anchor"></a><code><span>empty : <span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'builder</span>;</span></code></li><li id="type-builder.add" class="def record field anchored"><a href="#type-builder.add" class="anchor"></a><code><span>add : <span><span class="type-var">'y</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'builder</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'builder</span>;</span></code></li><li id="type-builder.finish" class="def record field anchored"><a href="#type-builder.finish" class="anchor"></a><code><span>finish : <span><span class="type-var">'builder</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'ys</span>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><span>(<span class="type-var">'y</span>, <span class="type-var">'ys</span>)</span> <a href="#type-builder">builder</a></span></span></code></li></ol></div><div class="spec-doc"><p>A builder accumulates elements of type <code>'y</code> one-by-one to produce a collection of type <code>'ys</code>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Builder"><a href="#module-Builder" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Builder/index.html">Builder</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="optic-types"><a href="#optic-types" class="anchor"></a>Optic types</h3><div class="odoc-spec"><div class="spec type anchored" id="type-pipe"><a href="#type-pipe" class="anchor"></a><code><span><span class="keyword">type</span> <span>(-'S, +'T) pipe</span></span></code></div><div class="spec-doc"><p>The <code>pipe</code> type constructor hides most of the implementation details of optics and basically represents a function that takes values of type <code>'S</code> as input and produces values of type <code>'T</code> as output.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-optic"><a href="#type-optic" class="anchor"></a><code><span><span class="keyword">type</span> <span>(-'S, +'F, -'G, +'T) optic</span></span><span> = <span><span><span>(<span class="type-var">'F</span>, <span class="type-var">'G</span>)</span> <a href="#type-pipe">pipe</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'T</span>)</span> <a href="#type-pipe">pipe</a></span></span></code></div><div class="spec-doc"><p>Optics are functions over <a href="#type-pipe"><code>pipe</code></a>s and are composable with normal function composition.</p></div></div><h3 id="optic-constructors"><a href="#optic-constructors" class="anchor"></a>Optic constructors</h3><div class="odoc-spec"><div class="spec value anchored" id="val-iso"><a href="#val-iso" class="anchor"></a><code><span><span class="keyword">val</span> iso : <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'F</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Defines a new invertible isomorphism from a pair of conversion functions.</p><pre class="language-ocaml"><code># let plus n = L.iso (( + ) n) (Fun.flip ( - ) n)
val plus : int -&gt; (int, int, int, int) L.optic = &lt;fun&gt;

# L.view (plus 1) 2
- : int = 3

# L.review (plus 2) 3
- : int = 1

# L.view (L.re (plus 2)) 3
- : int = 1</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lens"><a href="#val-lens" class="anchor"></a><code><span><span class="keyword">val</span> lens : <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'F</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Defines a new lens from a getter and setter.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-partial_lens"><a href="#val-partial_lens" class="anchor"></a><code><span><span class="keyword">val</span> partial_lens : 
  <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'F</span> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Defines a new partial lens from a getter, setter, and remover.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-getter"><a href="#val-getter" class="anchor"></a><code><span><span class="keyword">val</span> getter : <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'F</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'S</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Defines a new getter.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold_lens"><a href="#val-fold_lens" class="anchor"></a><code><span><span class="keyword">val</span> fold_lens : 
  <span><span>(<span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'E</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'F</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'E</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p><code>fold_lens fold traversal</code> defines a lens out of a suitable <code>fold</code> and a <code>traversal</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prism"><a href="#val-prism" class="anchor"></a><code><span><span class="keyword">val</span> prism : 
  <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span>[&lt; <span>`Hit of <span class="type-var">'F</span></span> <span><span>| `Miss</span> of <span class="type-var">'T</span></span> ]</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Defines a new invertible prism from a constructor-destructor pair.</p><pre class="language-ocaml"><code># let ends_with suffix =
    L.prism
      (fun string -&gt;
        if Filename.check_suffix string suffix then
          `Hit (Filename.chop_suffix string suffix)
        else `Miss string)
      (fun prefix -&gt; prefix ^ suffix)
val ends_with : string -&gt; (string, string, string, string) L.optic = &lt;fun&gt;

# L.view (ends_with &quot;.ml&quot;) &quot;Loko.ml&quot;
- : string = &quot;Loko&quot;

# L.set (ends_with &quot;.ml&quot;) &quot;Loco&quot; &quot;Loko.ml&quot;
- : string = &quot;Loco.ml&quot;

# L.can_view (ends_with &quot;.ml&quot;) &quot;Loko.mli&quot;
- : bool = false

# L.set (ends_with &quot;.ml&quot;) &quot;Loco&quot; &quot;Loko.mli&quot;
- : string = &quot;Loko.mli&quot;</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-traversal"><a href="#val-traversal" class="anchor"></a><code><span><span class="keyword">val</span> traversal : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>)</span> <a href="#type-iterator">iterator</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-builder">builder</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Defines a new traversal from an iterator-builder pair.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-branch'2"><a href="#val-branch'2" class="anchor"></a><code><span><span class="keyword">val</span> branch'2 : 
  <span><span><span>(<span class="type-var">'F1</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G1</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'F2</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G2</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'F1</span> * <span class="type-var">'F2</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G1</span> * <span class="type-var">'G2</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Defines a new traversal over the elements of a 2-tuple.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-branch'3"><a href="#val-branch'3" class="anchor"></a><code><span><span class="keyword">val</span> branch'3 : 
  <span><span><span>(<span class="type-var">'F1</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G1</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'F2</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G2</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'F3</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G3</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'F1</span> * <span class="type-var">'F2</span> * <span class="type-var">'F3</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G1</span> * <span class="type-var">'G2</span> * <span class="type-var">'G3</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Defines a new traversal over the elements of a 3-tuple.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-branch'4"><a href="#val-branch'4" class="anchor"></a><code><span><span class="keyword">val</span> branch'4 : 
  <span><span><span>(<span class="type-var">'F1</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G1</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'F2</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G2</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'F3</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G3</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'F4</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G4</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'F1</span> * <span class="type-var">'F2</span> * <span class="type-var">'F3</span> * <span class="type-var">'F4</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G1</span> * <span class="type-var">'G2</span> * <span class="type-var">'G3</span> * <span class="type-var">'G4</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Defines a new traversal over the elements of a 4-tuple.</p></div></div><h3 id="viewing-a-focus"><a href="#viewing-a-focus" class="anchor"></a>Viewing a focus</h3><div class="odoc-spec"><div class="spec value anchored" id="val-can_view"><a href="#val-can_view" class="anchor"></a><code><span><span class="keyword">val</span> can_view : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Determines whether the optic has a focus on the data.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-view"><a href="#val-view" class="anchor"></a><code><span><span class="keyword">val</span> view : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'F</span></span></code></div><div class="spec-doc"><p>Extracts the first focus of the optic on the data. Raises when there is no focus.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-view_opt"><a href="#val-view_opt" class="anchor"></a><code><span><span class="keyword">val</span> view_opt : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'F</span> option</span></span></code></div><div class="spec-doc"><p>Attempts to extract the first focus of the optic on the data.</p></div></div><h3 id="reviewing-through-invertible-optics"><a href="#reviewing-through-invertible-optics" class="anchor"></a>Reviewing through invertible optics</h3><div class="odoc-spec"><div class="spec value anchored" id="val-can_review"><a href="#val-can_review" class="anchor"></a><code><span><span class="keyword">val</span> can_review : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Determines whether the optic has an inverse focus on the data.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-review"><a href="#val-review" class="anchor"></a><code><span><span class="keyword">val</span> review : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span></span></code></div><div class="spec-doc"><p>Views through isomorphism in inverse direction. Raises when the optic is not reversible or doesn't have inverse focus on the data.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-review_opt"><a href="#val-review_opt" class="anchor"></a><code><span><span class="keyword">val</span> review_opt : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'T</span> option</span></span></code></div><div class="spec-doc"><p>Attempts to extract the inverse focus of the optic on the data. WARNING: This will raise when the optic is not reversible.</p></div></div><h3 id="mapping-over-focuses"><a href="#mapping-over-focuses" class="anchor"></a>Mapping over focuses</h3><div class="odoc-spec"><div class="spec value anchored" id="val-can_over"><a href="#val-can_over" class="anchor"></a><code><span><span class="keyword">val</span> can_over : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'G</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Determines whether the focuses of the optic on the data can be updated.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-over"><a href="#val-over" class="anchor"></a><code><span><span class="keyword">val</span> over : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'G</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span></span></code></div><div class="spec-doc"><p>Updates the focuses of the optic on the data. Raises when cannot.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-over_default"><a href="#val-over_default" class="anchor"></a><code><span><span class="keyword">val</span> over_default : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'S</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'G</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'S</span></span></code></div><div class="spec-doc"><p>Updates the focuses of the optic on the data. Returns input when cannot.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-over_opt"><a href="#val-over_opt" class="anchor"></a><code><span><span class="keyword">val</span> over_opt : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'G</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'T</span> option</span></span></code></div><div class="spec-doc"><p>Attempts to update the focuses of the optic on the data.</p></div></div><h3 id="setting-focuses"><a href="#setting-focuses" class="anchor"></a>Setting focuses</h3><div class="odoc-spec"><div class="spec value anchored" id="val-can_set"><a href="#val-can_set" class="anchor"></a><code><span><span class="keyword">val</span> can_set : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Determines whether the focuses of the optic on the data can be set.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set"><a href="#val-set" class="anchor"></a><code><span><span class="keyword">val</span> set : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span></span></code></div><div class="spec-doc"><p>Sets the focuses of the optic on the data. Raises when cannot.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_default"><a href="#val-set_default" class="anchor"></a><code><span><span class="keyword">val</span> set_default : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'S</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'S</span></span></code></div><div class="spec-doc"><p>Sets the focuses of the optic on the data. Returns input when cannot.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_opt"><a href="#val-set_opt" class="anchor"></a><code><span><span class="keyword">val</span> set_opt : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'T</span> option</span></span></code></div><div class="spec-doc"><p>Attempts to set the focuses of the optic on the data.</p></div></div><h3 id="removing-focuses"><a href="#removing-focuses" class="anchor"></a>Removing focuses</h3><div class="odoc-spec"><div class="spec value anchored" id="val-can_remove"><a href="#val-can_remove" class="anchor"></a><code><span><span class="keyword">val</span> can_remove : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Determines whether the focuses of the optic on the data can be removed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span><span class="keyword">val</span> remove : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span></span></code></div><div class="spec-doc"><p>Removes the focuses of the optic on the data. Raises when cannot.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_default"><a href="#val-remove_default" class="anchor"></a><code><span><span class="keyword">val</span> remove_default : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'S</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'S</span></span></code></div><div class="spec-doc"><p>Removes the focuses of the optic on the data. Returns input when cannot.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-remove_opt"><a href="#val-remove_opt" class="anchor"></a><code><span><span class="keyword">val</span> remove_opt : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'T</span> option</span></span></code></div><div class="spec-doc"><p>Attempts to remove the focuses of the optic on the data.</p></div></div><h3 id="dispersing-focuses"><a href="#dispersing-focuses" class="anchor"></a>Dispersing focuses</h3><div class="odoc-spec"><div class="spec value anchored" id="val-disperse"><a href="#val-disperse" class="anchor"></a><code><span><span class="keyword">val</span> disperse : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'G</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span></span></code></div><div class="spec-doc"><p>Injects array elements to the focuses or removes them. Raises when cannot.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-disperse_keep"><a href="#val-disperse_keep" class="anchor"></a><code><span><span class="keyword">val</span> disperse_keep : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'F</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span></span></code></div><div class="spec-doc"><p>Injects array elements to the focuses or keeps them. Raises when cannot.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parts_of"><a href="#val-parts_of" class="anchor"></a><code><span><span class="keyword">val</span> parts_of : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span><span class="type-var">'F</span> array</span>, <span><span class="type-var">'G</span> array</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Converts an optic to a lens focusing on an array of the focuses.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parts_of_keep"><a href="#val-parts_of_keep" class="anchor"></a><code><span><span class="keyword">val</span> parts_of_keep : 
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span><span class="type-var">'F</span> array</span>, <span><span class="type-var">'F</span> array</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Converts an optic to a lens focusing on an array of the focuses.</p></div></div><h3 id="transforms"><a href="#transforms" class="anchor"></a>Transforms</h3><div class="odoc-spec"><div class="spec value anchored" id="val-transform"><a href="#val-transform" class="anchor"></a><code><span><span class="keyword">val</span> transform : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span></span></code></div><div class="spec-doc"><p><code>transform optic data</code> is equivalent to <code>over optic Fun.id data</code>.</p></div></div><h4 id="transform-ops"><a href="#transform-ops" class="anchor"></a>Transform ops</h4><div class="odoc-spec"><div class="spec value anchored" id="val-remove_op"><a href="#val-remove_op" class="anchor"></a><code><span><span class="keyword">val</span> remove_op : <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Signal removal of current focus.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-over_op"><a href="#val-over_op" class="anchor"></a><code><span><span class="keyword">val</span> over_op : <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Update focus with given function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_op"><a href="#val-set_op" class="anchor"></a><code><span><span class="keyword">val</span> set_op : <span><span class="type-var">'T</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Update focus with given value.</p></div></div><h3 id="combinators"><a href="#combinators" class="anchor"></a>Combinators</h3><div class="odoc-spec"><div class="spec value anchored" id="val-choose"><a href="#val-choose" class="anchor"></a><code><span><span class="keyword">val</span> choose : <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A non-isomorphism computed from the focus.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-if_else"><a href="#val-if_else" class="anchor"></a><code><span><span class="keyword">val</span> if_else : 
  <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A choice between two non-isomorphisms depending on the focus.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-or_else"><a href="#val-or_else" class="anchor"></a><code><span><span class="keyword">val</span> or_else : 
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p><code>or_else secondary primary</code> acts like the <code>primary</code> when it can view and otherwise like <code>secondary</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-tuple'2"><a href="#val-tuple'2" class="anchor"></a><code><span><span class="keyword">val</span> tuple'2 : 
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'L1</span>, <span class="type-var">'L2</span>, <span class="type-var">'S</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'R1</span>, <span class="type-var">'R2</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'L1</span> * <span class="type-var">'R1</span>, <span class="type-var">'L2</span> * <span class="type-var">'R2</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A lens focusing on a pair of focuses. Given optics should be separable lenses.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-and_then"><a href="#val-and_then" class="anchor"></a><code><span><span class="keyword">val</span> and_then : 
  <span><span><span>(<span class="type-var">'U</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'U</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p><code>op_1 |&gt; and_then op_2</code> first performs with <code>op_1</code> and then <code>op_2</code>.</p><pre class="language-ocaml"><code># L.transform (L.over_op (( + ) 2) |&gt; L.and_then (L.over_op (( * ) 3))) 1
- : int = 9

# L.transform
    ((L.fst |&gt; L.and_then L.snd) ^&lt;&lt; L.over_op Int.to_string)
    (1, 2)
- : string * string = (&quot;1&quot;, &quot;2&quot;)</code></pre></div></div><h3 id="conditionals"><a href="#conditionals" class="anchor"></a>Conditionals</h3><p>The <a href="#val-cond_of"><code>cond_of</code></a>, <a href="#val-case"><code>case</code></a>, and <a href="#val-otherwise"><code>otherwise</code></a> combinators provide an alternative syntax for conditional optics. In general,</p><pre class="language-ocaml"><code>cond_of traversal
@@ case predicate_1 optic_1
@@ case predicate_2 optic_2
   ...
@@ case predicate_n optic_n
@@ otherwise optic</code></pre><p>is equivalent to</p><pre class="language-ocaml"><code>if_else (exists predicate_1 traversal) optic_1
@@ if_else (exists predicate_2 traversal) optic_2
   ...
@@ if_else (exists predicate_n traversal) optic_n
@@ optic</code></pre><p>using <a href="#val-if_else"><code>if_else</code></a> and <a href="#val-exists"><code>exists</code></a>.</p><div class="odoc-spec"><div class="spec value anchored" id="val-cond_of"><a href="#val-cond_of" class="anchor"></a><code><span><span class="keyword">val</span> cond_of : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'C</span>, <span class="type-var">'C</span>, <span class="type-var">'U</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'C</span>, <span class="type-var">'C</span>, <span class="type-var">'U</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'K</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'K</span></span></code></div><div class="spec-doc"><p><code>cond_of traversal</code> starts a conditional optic definition where the following <a href="#val-case"><code>case</code></a>s use the <code>traversal</code> to extract targets for their predicates.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-case"><a href="#val-case" class="anchor"></a><code><span><span class="keyword">val</span> case : 
  <span><span>(<span><span class="type-var">'C</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'C</span>, <span class="type-var">'C</span>, <span class="type-var">'U</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'C</span>, <span class="type-var">'C</span>, <span class="type-var">'U</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p><code>case predicate optic</code> continues a conditional optic definition with given <code>predicate</code> and consequent <code>optic</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-otherwise"><a href="#val-otherwise" class="anchor"></a><code><span><span class="keyword">val</span> otherwise : 
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'C</span>, <span class="type-var">'C</span>, <span class="type-var">'U</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p><code>otherwise optic</code> ends a conditional optic definition and provides the default <code>optic</code> to use when none of the <a href="#val-case"><code>case</code></a>s match the focus.</p></div></div><h3 id="primitives"><a href="#primitives" class="anchor"></a>Primitives</h3><div class="odoc-spec"><div class="spec value anchored" id="val-zero"><a href="#val-zero" class="anchor"></a><code><span><span class="keyword">val</span> zero : <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'S</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An optic that never has a focus.</p></div></div><h3 id="removal"><a href="#removal" class="anchor"></a>Removal</h3><div class="odoc-spec"><div class="spec value anchored" id="val-removed_if"><a href="#val-removed_if" class="anchor"></a><code><span><span class="keyword">val</span> removed_if : <span><span>(<span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An identity like optic that signals removal when written value matches predicate.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-as_removed"><a href="#val-as_removed" class="anchor"></a><code><span><span class="keyword">val</span> as_removed : <span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A prism like optic that signals removal when written with equal value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-removed_as"><a href="#val-removed_as" class="anchor"></a><code><span><span class="keyword">val</span> removed_as : <span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A prism like optic that maps a removed focus to given value when written.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-removed_as_none"><a href="#val-removed_as_none" class="anchor"></a><code><span><span class="keyword">val</span> removed_as_none : <span><span>(<span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span><span class="type-var">'G</span> option</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A prism like optic that maps a removed focus to <code>None</code> when written.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-none_as_removed"><a href="#val-none_as_removed" class="anchor"></a><code><span><span class="keyword">val</span> none_as_removed : <span><span>(<span class="type-var">'F</span>, <span class="type-var">'F</span>, <span><span class="type-var">'G</span> option</span>, <span class="type-var">'G</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A prism like optic that maps <code>None</code> to a removed focus when written.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-removed_option"><a href="#val-removed_option" class="anchor"></a><code><span><span class="keyword">val</span> removed_option : <span><span>(<span><span class="type-var">'F</span> option</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An optic that peels away <code>Some</code> on read and removes <code>None</code> on write.</p></div></div><h3 id="prisms"><a href="#prisms" class="anchor"></a>Prisms</h3><div class="odoc-spec"><div class="spec value anchored" id="val-accept"><a href="#val-accept" class="anchor"></a><code><span><span class="keyword">val</span> accept : <span><span>(<span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'F</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A prism with a focus only when it passes the given predicate.</p><pre class="language-ocaml"><code># L.remove
    (L.List.elems ^&lt;&lt; L.accept (fun x -&gt; 4 &lt; x))
    [ 5; 3; 1; 6; 4; 1 ]
- : int list = [3; 1; 4; 1]</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reject"><a href="#val-reject" class="anchor"></a><code><span><span class="keyword">val</span> reject : <span><span>(<span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'F</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A prism with a focus except when it passes the given predicate.</p><pre class="language-ocaml"><code># L.remove
    (L.List.elems ^&lt;&lt; L.reject (fun x -&gt; x &lt; 5))
    [ 5; 3; 1; 6; 4; 1 ]
- : int list = [3; 1; 4; 1]</code></pre></div></div><h3 id="isomorphisms"><a href="#isomorphisms" class="anchor"></a>Isomorphisms</h3><div class="odoc-spec"><div class="spec value anchored" id="val-id"><a href="#val-id" class="anchor"></a><code><span><span class="keyword">val</span> id : <span><span>(<span class="type-var">'S</span>, <span class="type-var">'S</span>, <span class="type-var">'T</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>The identity isomorphism.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-re"><a href="#val-re" class="anchor"></a><code><span><span class="keyword">val</span> re : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'G</span>, <span class="type-var">'T</span>, <span class="type-var">'S</span>, <span class="type-var">'F</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>Inverts the given optic. Raises when not given an invertible optic.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reread"><a href="#val-reread" class="anchor"></a><code><span><span class="keyword">val</span> reread : <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'F</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'T</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An isomorphism that maps the focus with given function when read.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-rewrite"><a href="#val-rewrite" class="anchor"></a><code><span><span class="keyword">val</span> rewrite : <span><span>(<span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'T</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'S</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An isomorphism that maps the focus with given function when written.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-normalize"><a href="#val-normalize" class="anchor"></a><code><span><span class="keyword">val</span> normalize : <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'F</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'S</span>, <span class="type-var">'F</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An isomorphism that maps the focus with given function in both ways.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-subset"><a href="#val-subset" class="anchor"></a><code><span><span class="keyword">val</span> subset : <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span><span class="type-var">'S</span> option</span>, <span class="type-var">'T</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An isomorphism between values and values that pass the predicate.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_default"><a href="#val-to_default" class="anchor"></a><code><span><span class="keyword">val</span> to_default : <span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'F</span> option</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An isomorphism that maps <code>None</code> to the given default value when read.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_default"><a href="#val-of_default" class="anchor"></a><code><span><span class="keyword">val</span> of_default : <span><span class="type-var">'G</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span><span class="type-var">'G</span> option</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An isomorphism that maps the given default value to <code>None</code> when written.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-default"><a href="#val-default" class="anchor"></a><code><span><span class="keyword">val</span> default : <span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'F</span> option</span>, <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span><span class="type-var">'F</span> option</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An isomorphism that maps <code>None</code> to the given default value when read and maps the default value to <code>None</code> when written.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_or"><a href="#val-is_or" class="anchor"></a><code><span><span class="keyword">val</span> is_or : <span><span class="label">falsy</span>:<span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">truthy</span>:<span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'F</span>, bool, bool, <span class="type-var">'F</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An isomorphism between given values and booleans. Only <code>truthy</code> maps to <code>true</code> when read.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_at"><a href="#val-apply_at" class="anchor"></a><code><span><span class="keyword">val</span> apply_at : 
  <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'Si</span>, <span class="type-var">'Fi</span>, <span class="type-var">'F</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'G</span>, <span class="type-var">'Gi</span>, <span class="type-var">'Ti</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'Si</span>, <span class="type-var">'Fi</span>, <span class="type-var">'Gi</span>, <span class="type-var">'Ti</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>TODO</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iterate"><a href="#val-iterate" class="anchor"></a><code><span><span class="keyword">val</span> iterate : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'S</span>, <span class="type-var">'T</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'S</span>, <span class="type-var">'T</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>TODO</p></div></div><h3 id="side-effects"><a href="#side-effects" class="anchor"></a>Side-effects</h3><div class="odoc-spec"><div class="spec value anchored" id="val-before"><a href="#val-before" class="anchor"></a><code><span><span class="keyword">val</span> before : <span><span>(<span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'S</span>, <span class="type-var">'S</span>, <span class="type-var">'T</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An identity like optic that performs a given side-effect when viewed.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-after"><a href="#val-after" class="anchor"></a><code><span><span class="keyword">val</span> after : 
  <span><span class="optlabel">?on_removed</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'T</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'S</span>, <span class="type-var">'S</span>, <span class="type-var">'T</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An identity like optic that performs given side-effects when written.</p></div></div><h3 id="folds"><a href="#folds" class="anchor"></a>Folds</h3><div class="odoc-spec"><div class="spec value anchored" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span><span class="keyword">val</span> fold : <span><span class="type-var">'R</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'R</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'R</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'R</span></span></code></div><div class="spec-doc"><p>Folds over the focuses of the optic on the data.</p><pre class="language-ocaml"><code># L.fold 0 ( + ) L.List.elems [ 3; 1; 4 ]
- : int = 8</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span><span class="keyword">val</span> iter : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Iterates over the focuses of the optic on the data.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-count"><a href="#val-count" class="anchor"></a><code><span><span class="keyword">val</span> count : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Counts the number of focuses the optic has on the data.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-collect_with"><a href="#val-collect_with" class="anchor"></a><code><span><span class="keyword">val</span> collect_with : <span><span><span>(<span class="type-var">'F</span>, <span class="type-var">'FS</span>)</span> <a href="#type-builder">builder</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'FS</span></span></code></div><div class="spec-doc"><p>Collects values of the focuses of the optic on the data with the given builder.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-collect"><a href="#val-collect" class="anchor"></a><code><span><span class="keyword">val</span> collect : <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'F</span> list</span></span></code></div><div class="spec-doc"><p>Extracts a list of all the focuses of the optic on the data.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span><span class="keyword">val</span> exists : <span><span>(<span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Determines whether any focus of the optic on the data satisfy the predicate.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-forall"><a href="#val-forall" class="anchor"></a><code><span><span class="keyword">val</span> forall : <span><span>(<span><span class="type-var">'F</span> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'S</span>, <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Determines whether all focuces of the optic on the data satisfy the predicate.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-disjunction"><a href="#val-disjunction" class="anchor"></a><code><span><span class="keyword">val</span> disjunction : <span><span><span>(<span class="type-var">'S</span>, bool, bool, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>disjunction optic data</code> is equivalent to <code>exists Fun.id optic data</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conjunction"><a href="#val-conjunction" class="anchor"></a><code><span><span class="keyword">val</span> conjunction : <span><span><span>(<span class="type-var">'S</span>, bool, bool, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>conjunction optic data</code> is equivalent to <code>forall Fun.id optic data</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-concat"><a href="#val-concat" class="anchor"></a><code><span><span class="keyword">val</span> concat : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'S</span>, string, <span class="type-var">'G</span>, <span class="type-var">'T</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'S</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Concatenates all of the focuses of the optic on the data with given separator.</p></div></div><h3 id="pairs"><a href="#pairs" class="anchor"></a>Pairs</h3><div class="odoc-spec"><div class="spec value anchored" id="val-fst"><a href="#val-fst" class="anchor"></a><code><span><span class="keyword">val</span> fst : <span><span>(<span class="type-var">'L1</span> * <span class="type-var">'R</span>, <span class="type-var">'L1</span>, <span class="type-var">'L2</span>, <span class="type-var">'L2</span> * <span class="type-var">'R</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A lens focusing on the first element of a pair.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-snd"><a href="#val-snd" class="anchor"></a><code><span><span class="keyword">val</span> snd : <span><span>(<span class="type-var">'L</span> * <span class="type-var">'R1</span>, <span class="type-var">'R1</span>, <span class="type-var">'R2</span>, <span class="type-var">'L</span> * <span class="type-var">'R2</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>A lens focusing on the second element of a pair.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iso_pair"><a href="#val-iso_pair" class="anchor"></a><code><span><span class="keyword">val</span> iso_pair : 
  <span><span><span>(<span class="type-var">'SL</span>, <span class="type-var">'FL</span>, <span class="type-var">'GL</span>, <span class="type-var">'TL</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'SR</span>, <span class="type-var">'FR</span>, <span class="type-var">'GR</span>, <span class="type-var">'TR</span>)</span> <a href="#type-optic">optic</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'SL</span> * <span class="type-var">'SR</span>, <span class="type-var">'FL</span> * <span class="type-var">'FR</span>, <span class="type-var">'GL</span> * <span class="type-var">'GR</span>, <span class="type-var">'TL</span> * <span class="type-var">'TR</span>)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An isomorphism between pairs.</p></div></div><h3 id="tuples"><a href="#tuples" class="anchor"></a>Tuples</h3><div class="odoc-spec"><div class="spec value anchored" id="val-elem_1_of_2"><a href="#val-elem_1_of_2" class="anchor"></a><code><span><span class="keyword">val</span> elem_1_of_2 : <span><span>(<span class="type-var">'F</span> * <span class="type-var">'X2</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G</span> * <span class="type-var">'X2</span>)</span> <a href="#type-optic">optic</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-elem_2_of_2"><a href="#val-elem_2_of_2" class="anchor"></a><code><span><span class="keyword">val</span> elem_2_of_2 : <span><span>(<span class="type-var">'X1</span> * <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'X1</span> * <span class="type-var">'G</span>)</span> <a href="#type-optic">optic</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-elem_1_of_3"><a href="#val-elem_1_of_3" class="anchor"></a><code><span><span class="keyword">val</span> elem_1_of_3 : <span><span>(<span class="type-var">'F</span> * <span class="type-var">'X2</span> * <span class="type-var">'X3</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G</span> * <span class="type-var">'X2</span> * <span class="type-var">'X3</span>)</span> <a href="#type-optic">optic</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-elem_2_of_3"><a href="#val-elem_2_of_3" class="anchor"></a><code><span><span class="keyword">val</span> elem_2_of_3 : <span><span>(<span class="type-var">'X1</span> * <span class="type-var">'F</span> * <span class="type-var">'X3</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'X1</span> * <span class="type-var">'G</span> * <span class="type-var">'X3</span>)</span> <a href="#type-optic">optic</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-elem_3_of_3"><a href="#val-elem_3_of_3" class="anchor"></a><code><span><span class="keyword">val</span> elem_3_of_3 : <span><span>(<span class="type-var">'X1</span> * <span class="type-var">'X2</span> * <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'X1</span> * <span class="type-var">'X2</span> * <span class="type-var">'G</span>)</span> <a href="#type-optic">optic</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-elem_1_of_4"><a href="#val-elem_1_of_4" class="anchor"></a><code><span><span class="keyword">val</span> elem_1_of_4 : <span><span>(<span class="type-var">'F</span> * <span class="type-var">'X2</span> * <span class="type-var">'X3</span> * <span class="type-var">'X4</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'G</span> * <span class="type-var">'X2</span> * <span class="type-var">'X3</span> * <span class="type-var">'X4</span>)</span> <a href="#type-optic">optic</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-elem_2_of_4"><a href="#val-elem_2_of_4" class="anchor"></a><code><span><span class="keyword">val</span> elem_2_of_4 : <span><span>(<span class="type-var">'X1</span> * <span class="type-var">'F</span> * <span class="type-var">'X3</span> * <span class="type-var">'X4</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'X1</span> * <span class="type-var">'G</span> * <span class="type-var">'X3</span> * <span class="type-var">'X4</span>)</span> <a href="#type-optic">optic</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-elem_3_of_4"><a href="#val-elem_3_of_4" class="anchor"></a><code><span><span class="keyword">val</span> elem_3_of_4 : <span><span>(<span class="type-var">'X1</span> * <span class="type-var">'X2</span> * <span class="type-var">'F</span> * <span class="type-var">'X4</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'X1</span> * <span class="type-var">'X2</span> * <span class="type-var">'G</span> * <span class="type-var">'X4</span>)</span> <a href="#type-optic">optic</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-elem_4_of_4"><a href="#val-elem_4_of_4" class="anchor"></a><code><span><span class="keyword">val</span> elem_4_of_4 : <span><span>(<span class="type-var">'X1</span> * <span class="type-var">'X2</span> * <span class="type-var">'X3</span> * <span class="type-var">'F</span>, <span class="type-var">'F</span>, <span class="type-var">'G</span>, <span class="type-var">'X1</span> * <span class="type-var">'X2</span> * <span class="type-var">'X3</span> * <span class="type-var">'G</span>)</span> <a href="#type-optic">optic</a></span></span></code></div></div><h3 id="numerics"><a href="#numerics" class="anchor"></a>Numerics</h3><div class="odoc-spec"><div class="spec value anchored" id="val-truncate"><a href="#val-truncate" class="anchor"></a><code><span><span class="keyword">val</span> truncate : <span><span>(float, int, int, float)</span> <a href="#type-optic">optic</a></span></span></code></div><div class="spec-doc"><p>An isomorphism between integers and floats.</p></div></div><h3 id="stdlib-data-types"><a href="#stdlib-data-types" class="anchor"></a>Stdlib data types</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Array"><a href="#module-Array" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Array/index.html">Array</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Either"><a href="#module-Either" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Either/index.html">Either</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-List"><a href="#module-List" class="anchor"></a><code><span><span class="keyword">module</span> <a href="List/index.html">List</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Map"><a href="#module-Map" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Map/index.html">Map</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Option"><a href="#module-Option" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Option/index.html">Option</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Result"><a href="#module-Result" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Result/index.html">Result</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-String"><a href="#module-String" class="anchor"></a><code><span><span class="keyword">module</span> <a href="String/index.html">String</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
